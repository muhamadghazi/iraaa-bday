
<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ucapan Ulang Tahun</title>
  <style>
    :root{--bg:#0f172a;--card:#0b1220;--accent:#f59e0b;--glass:rgba(255,255,255,0.06)}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{background:linear-gradient(180deg,#021028 0%, #081129 60%);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:24px}
    .card{width:100%;max-width:920px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border-radius:18px;padding:20px;box-shadow:0 8px 30px rgba(2,6,23,0.7);position:relative;overflow:hidden}
    header{display:flex;gap:16px;align-items:center}
    .title{font-size:1.4rem;font-weight:700}
    .subtitle{color:#bcd3ef;font-size:0.95rem}

    .main{display:grid;grid-template-columns:360px 1fr;gap:20px;margin-top:18px}
    .photo-wrap{background:var(--glass);padding:10px;border-radius:14px;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .photo{width:320px;height:320px;border-radius:12px;object-fit:cover;background:linear-gradient(135deg,#0b1220,#05203a);display:block}
    .controls{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.08);padding:8px 12px;border-radius:10px;color:inherit;cursor:pointer}
    .btn.primary{background:linear-gradient(90deg,var(--accent),#fb923c);color:#061526;border:none}

    .content{padding:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px}
    .greeting{font-size:1.2rem;font-weight:700}
    .message{margin-top:10px;line-height:1.45;color:#d9e9ff}

    .customize{margin-top:14px;display:flex;gap:8px;flex-wrap:wrap}
    input[type="text"], textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
    textarea{min-height:120px}

    .audio-track{display:flex;gap:8px;align-items:center}
    .small{font-size:0.85rem;color:#bcd3ef}

    /* confetti canvas overlay */
    #confetti{pointer-events:none;position:absolute;left:0;top:0;width:100%;height:100%;z-index:40}

    /* responsive */
    @media (max-width:880px){.main{grid-template-columns:1fr;}.photo{width:260px;height:260px}}
  </style>
</head>
<body>
  <div class="card" id="card">
    <canvas id="confetti"></canvas>
    <header>
      <div>
        <div class="title">Selamat Ulang Tahun!</div>
        <div class="subtitle">Buat ucapan yang spesial ‚Äî tambahkan foto & musik.</div>
      </div>
      <div style="margin-left:auto;text-align:right">
        <div class="small">Dibuat oleh: <strong>Template Generator</strong></div>
        <div class="small">Klik 'Play' untuk memutar musik.</div>
      </div>
    </header>

    <section class="main">
      <div class="photo-wrap">
        <img id="photo" class="photo" alt="Foto Ucapan" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='800' height='800'><rect width='100%' height='100%' fill='%2309181a'/><text x='50%' y='50%' fill='%23cfe8ff' font-family='Arial' font-size='36' text-anchor='middle'>Foto Anda</text></svg>"/>

        <div class="controls">
          <label class="btn"><input id="filePhoto" type="file" accept="image/*" style="display:none">Pilih Foto</label>
          <button class="btn" id="btnRemove">Hapus Foto</button>
          <button class="btn primary" id="btnConfetti">üéâ Mulai Perayaan</button>
        </div>

        <div style="margin-top:8px;font-size:0.85rem;color:#bcd3ef;text-align:center">Seret dan lepas foto ke area gambar juga bisa.</div>
      </div>

      <div>
        <div class="content">
          <div class="greeting" contenteditable id="toName">Untuk: Tiara Salwa Oktaviani</div>
          <div class="message" id="messageText" contenteditable>selamat ulang tahun yang ke-17! nggak kerasa ya, udah sejauh ini perjalanan kamu. usia 17 tuu memang special, bukan cuma karena angka yang sering dibilang ‚Äúsweet seventeen‚Äù, tapi karena di umur ini kamu mulai bener‚Äù belajar mengenal diri sendiri, nentuin arah hidup, dan menikmati setiap hal kecil yang terjadi.
aku harap di usia baru ini, kamu bisa terus tumbuh jadi pribadi yang kuat, bijak, dan tetap rendah hati seperti sekarang. semoga apa pun yang kamu perjuangkan pelan-pelan mulai terlihat hasilnya. jangan pernah ragu buat percaya sama diri sendiri, karena kamu lebih mampu dari yang kamu pikir.
aku juga doain semoga kamu dikelilingi orang‚Äù baik yang tulus, yang selalu support kamu tanpa pamrih. hidup emang nggak selalu gampang, tapi semoga kamu selalu punya alasan buat tetap senyum dan bersyukur setiap harinya.
pokoknya, happy birthday ya! nikmatin setiap momennya, karena masa‚Äù ini ngga akan terulang lagi. semoga 17 tahun kamu jadi awal dari banyak hal indah yang bakal datang. üåø</div>

          <div class="customize">
            <div style="flex:1 1 220px">
              <label class="small">Ubah Nama Penerima</label>
              <input id="inputName" type="text" placeholder="Nama penerima (mis. Budi)">
            </div>
            <div style="flex:1 1 220px">
              <label class="small">Ubah Pesan</label>
              <input id="inputMsg" type="text" placeholder="Pesan singkat (mis. Semoga bahagia)">
            </div>
            <div style="flex:0 0 auto;display:flex;align-items:flex-end;gap:8px">
              <button class="btn primary" id="btnApply">Terapkan</button>
              <button class="btn" id="btnDownload">Unduh HTML</button>
            </div>
          </div>

          <hr style="margin:14px 0;border:none;border-top:1px solid rgba(255,255,255,0.03)">

          <div class="audio-track">
            <audio id="audio" controls preload="none">
              <!-- Letakkan file musik bernama music.mp3 di folder yang sama, atau gunakan tombol Choose Music -->
              <source src="music.mp3" type="audio/mpeg">
              Browser Anda tidak mendukung audio tag.
            </audio>
            <label class="btn"><input id="fileMusic" type="file" accept="audio/*" style="display:none">Choose Music</label>
            <div style="margin-left:auto;text-align:right">
              <div class="small">Catatan: autoplay mungkin diblokir oleh browser. Gunakan tombol play.</div>
            </div>
          </div>

        </div>

        <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn" id="btnShare">Salin Link (data URL)</button>
          <button class="btn" id="btnReset">Reset ke Awal</button>
        </div>

      </div>
    </section>

    <footer style="margin-top:14px;text-align:center;color:#9fbbe0;font-size:0.85rem">Ingin saya aturkan nama, pesan, musik, atau foto khusus? Beri tahu saya ‚Äî saya bisa sesuaikan.</footer>
  </div>

  <script>
    // Basic interactions
    const filePhoto = document.getElementById('filePhoto');
    const photo = document.getElementById('photo');
    const btnRemove = document.getElementById('btnRemove');
    const btnConfetti = document.getElementById('btnConfetti');
    const inputName = document.getElementById('inputName');
    const inputMsg = document.getElementById('inputMsg');
    const btnApply = document.getElementById('btnApply');
    const toName = document.getElementById('toName');
    const messageText = document.getElementById('messageText');
    const btnDownload = document.getElementById('btnDownload');
    const fileMusic = document.getElementById('fileMusic');
    const audio = document.getElementById('audio');
    const btnShare = document.getElementById('btnShare');
    const btnReset = document.getElementById('btnReset');

    filePhoto.addEventListener('change', e => {
      const f = e.target.files[0];
      if(!f) return;
      const url = URL.createObjectURL(f);
      photo.src = url;
    });

    // Drag & drop photo
    photo.addEventListener('dragover', ev => {ev.preventDefault(); photo.style.opacity=0.8});
    photo.addEventListener('dragleave', ev => {photo.style.opacity=1});
    photo.addEventListener('drop', ev => {
      ev.preventDefault();photo.style.opacity=1;
      const f = ev.dataTransfer.files && ev.dataTransfer.files[0];
      if(f && f.type.startsWith('image/')){ photo.src = URL.createObjectURL(f);} 
    });

    btnRemove.addEventListener('click', () => {
      photo.src = "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='800' height='800'><rect width='100%' height='100%' fill='%2309181a'/><text x='50%' y='50%' fill='%23cfe8ff' font-family='Arial' font-size='36' text-anchor='middle'>Foto Anda</text></svg>";
    });

    btnApply.addEventListener('click', () => {
      if(inputName.value.trim()) toName.textContent = 'Untuk: ' + inputName.value.trim();
      if(inputMsg.value.trim()) messageText.textContent = inputMsg.value.trim();
    });

    // music file upload
    fileMusic.addEventListener('change', e=>{
      const f = e.target.files[0]; if(!f) return; const url = URL.createObjectURL(f); audio.src = url; audio.play().catch(()=>{});
    });

    // Download current page as HTML (data URL method)
    btnDownload.addEventListener('click', ()=>{
      const doctype = '<!doctype html>';
      const html = document.documentElement.outerHTML;
      const blob = new Blob([doctype+html], {type:'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'ucapan_ulang_tahun.html'; document.body.appendChild(a); a.click(); a.remove();
    });

    // Share: produce data URL that encodes the current HTML (note: large images/audio may bloat)
    btnShare.addEventListener('click', async ()=>{
      const doctype = '<!doctype html>';
      const html = doctype + document.documentElement.outerHTML;
      try{
        const blob = new Blob([html], {type:'text/html'});
        const url = URL.createObjectURL(blob);
        await navigator.clipboard.writeText(url);
        alert('Link sementara ke clipboard. (Untuk link permanen, unggah file HTML ke layanan hosting)');
      }catch(e){
        // fallback: open new tab with content
        const w = window.open(); w.document.open(); w.document.write(html); w.document.close();
      }
    });

    btnReset.addEventListener('click', ()=>{
      toName.textContent = 'Untuk: Tiara Salwa Oktaviani';
      messageText.textContent = 'selamat ulang tahun yang ke-17! nggak kerasa ya, udah sejauh ini perjalanan kamu. usia 17 tuu memang special, bukan cuma karena angka yang sering dibilang ‚Äúsweet seventeen‚Äù, tapi karena di umur ini kamu mulai bener‚Äù belajar mengenal diri sendiri, nentuin arah hidup, dan menikmati setiap hal kecil yang terjadi.\naku harap di usia baru ini, kamu bisa terus tumbuh jadi pribadi yang kuat, bijak, dan tetap rendah hati seperti sekarang. semoga apa pun yang kamu perjuangkan pelan-pelan mulai terlihat hasilnya. jangan pernah ragu buat percaya sama diri sendiri, karena kamu lebih mampu dari yang kamu pikir.\naku juga doain semoga kamu dikelilingi orang‚Äù baik yang tulus, yang selalu support kamu tanpa pamrih. hidup emang nggak selalu gampang, tapi semoga kamu selalu punya alasan buat tetap senyum dan bersyukur setiap harinya.\npokoknya, happy birthday ya! nikmatin setiap momennya, karena masa‚Äù ini ngga akan terulang lagi. semoga 17 tahun kamu jadi awal dari banyak hal indah yang bakal datang. üåø';
      btnRemove.click();
      audio.pause(); audio.currentTime=0;
    });

    // Simple confetti system
    (function(){
      const canvas = document.getElementById('confetti');
      const ctx = canvas.getContext('2d');
      function resize(){canvas.width = card.clientWidth; canvas.height = card.clientHeight}
      const card = document.getElementById('card');
      window.addEventListener('resize', resize); resize();

      let pieces = [];
      function random(min,max){return Math.random()*(max-min)+min}
      function spawn(amount=80){
        for(let i=0;i<amount;i++){
          pieces.push({x:random(0,canvas.width), y:random(-canvas.height,0), w:random(6,14), h:random(8,18), vx:random(-1.5,1.5), vy:random(2,6), rot:random(0,6.28), rotV:random(-0.2,0.2), col:['#ff7a7a','#ffd36b','#8ee3a8','#91c7ff','#d39bff'][Math.floor(random(0,5))]});
        }
      }
      function update(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        for(let i=pieces.length-1;i>=0;i--){
          const p = pieces[i]; p.x += p.vx; p.y += p.vy; p.rot += p.rotV; p.vy *= 1.01; // gravity-ish
          ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot);
          ctx.fillStyle = p.col; ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h);
          ctx.restore();
          if(p.y>canvas.height+50) pieces.splice(i,1);
        }
        requestAnimationFrame(update);
      }
      update();

      btnConfetti.addEventListener('click', ()=>{
        spawn(120); // big burst
        try{audio.play().catch(()=>{});}catch(e){}
      });
    })();

    // Allow editing contenteditable fields to be included when downloading: replace innerHTML with text nodes for simplicity
    // (Handled by download as we're capturing the live DOM.)

  </script>
</body>
</html>